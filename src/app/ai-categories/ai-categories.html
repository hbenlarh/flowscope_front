<app-header></app-header>
<section class="ai-categories-section">
  <div class="container">
    <div *ngIf="loading" class="loading-indicator">
      <p>Loading categories...</p>
    </div>

    <div *ngIf="error" class="error-message">
      <p>{{ error }}</p>
    </div>

    <!-- Search Section -->
    <div *ngIf="!loading && !error" class="search-section">
      <div class="search-container">
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="onSearchChange()"
          placeholder="Search for categories..."
          class="search-input"
        />
        <span class="search-icon">üîç</span>
        <button 
          *ngIf="searchTerm" 
          (click)="clearSearch()" 
          class="clear-search-btn"
          title="Clear search"
        >
          ‚úï
        </button>
      </div>
    </div>

    <!-- No results message -->
    <div *ngIf="!loading && !error && searchTerm && filteredContainers.length === 0" class="no-results">
      <p>No containers or categories found matching "{{ searchTerm }}"</p>
    </div>

    <div *ngIf="!loading && !error && containers.length === 0" class="no-data">
      <p>No categories available.</p>
    </div>

    <div *ngFor="let container of filteredContainers" class="container-card">
      <div class="container-header">
        <h2>{{ container.name }}</h2>
        <p>{{ container.description }}</p>
      </div>

      <div class="categories-grid">
        <a *ngFor="let category of container.categories" class="category-card" [routerLink]="['/categories', category.category_id]">
          <div class="category-content">
            <div class="icon-container">
              <span class="category-icon" [ngClass]="category.icon">
              </span>
            </div>
            <div class="category-name">{{ category.name }}</div>
            <div class="category-count" *ngIf="category.count">({{ category.count }})</div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>
<app-footer></app-footer>